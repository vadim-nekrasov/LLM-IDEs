---
description: Canonical source of truth for task complexity classification criteria.
globs: 
alwaysApply: false
---

# Task Complexity Classification

This file defines the canonical criteria for classifying task complexity. Other rules and commands reference this file to avoid duplication and ensure consistency.

---

## Complexity Levels

The **Tree Search** column describes which Solution Tree Search mode to apply: full, reduced, or none.

| Level | Description | Tree Search |
|-------|-------------|-------------|
| **COMPLEX** | Default. Requires full tree search. | Full (15+ variants) |
| **SIMPLE** | Meets all simplicity criteria. | Reduced (5 variants) |
| **TRIVIAL** | Purely mechanical edits, no behavioral change. | None |
| **SKIPPED** | User explicitly requested skip. | None |

---

## Simplicity Criteria Table

A task is **SIMPLE** only if **ALL** of the following are true:

| # | Criterion | Must be TRUE to classify as SIMPLE |
|---|-----------|-----------------------------------|
| 1 | **File Scope** | Changes are limited to **1-2 files** |
| 2 | **No New Abstractions** | No new public APIs, routes, Redux slices, shared components, hooks, or cross-cutting concerns |
| 3 | **No Architecture Impact** | No changes to state management, routing, global config, build tooling, or project structure |
| 4 | **User Framing** | User explicitly described it as "small fix", "minor change", "typo", "cosmetic" |
| 5 | **Low Risk** | Mistake would be trivially reversible, no data loss or security implications |

**Rule:** If ANY criterion is FALSE → Task is **COMPLEX**.

---

## Trivial Tasks (Mechanical Edits)

A task is **TRIVIAL** if **ALL** of the following are true:

| # | Criterion | Must be TRUE to classify as TRIVIAL |
|---|-----------|-------------------------------------|
| 1 | **Type of Change** | ONLY: renaming (files, methods, variables, props) to names **specified by user**, OR deleting comments, OR pure formatting (whitespace, indentation) |
| 2 | **No Behavioral Change** | Runtime behavior, contracts, and public APIs remain exactly the same |
| 3 | **No New Abstractions** | No new functions, classes, hooks, components, or utilities introduced |
| 4 | **Deterministic Pattern** | Changes follow a clear, user-defined pattern (e.g., "rename X to Y everywhere") |
| 5 | **Easy to Revert** | Mistakes are trivially detectable and reversible (git, IDE rename history) |

**Rule:** If ALL Trivial criteria are TRUE → Complexity: **TRIVIAL** → Skip tree search entirely.

> **Note**: TRIVIAL tasks may touch many files — scope alone doesn't disqualify. The key is: no thinking required, just execution.

---

## Quick Mode (Skip) Keywords & User Overrides

If the user's prompt **clearly expresses a request** to skip analysis or tree search, the task is classified as **SKIPPED**,
even if the exact wording differs from the examples below.

The following phrases are **typical triggers** (examples, not an exhaustive list):

**examples:** 
- `без дерева решений`
- `пропусти анализ`

> **Note**: Common words like "быстро", "quick", "fast" are NOT triggers by themselves — they're too easy to say accidentally. Use your language understanding: if the user explicitly asks to "skip all the analysis and just code it", treat it as SKIPPED.

When SKIPPED:
- Output: `Complexity: SKIPPED (user override)`
- Proceed directly to implementation.
- Do not warn or question the user's choice.

