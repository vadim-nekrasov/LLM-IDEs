Задача: Выполни структурированный древовидный поиск наилучшего решения для текущей задачи.

## Учет ограничений и критериев

Если в описании задачи есть блок с названием, содержащим слово "Ограничения" (например, "Заданные ограничения"),
воспринимай его содержимое как `заданные_ограничения`. **Все** рассматриваемые варианты решения обязаны
соответствовать этим ограничениям; нарушающие `заданные_ограничения` варианты сразу отбрасывай.

Если явные критерии выбора решения указаны в задаче, используй их как `критерий_поиска`.

Если критерии не указаны, используй дефолтный `критерий_поиска`:
- корректность;
- краткость;
- элегантность;
- идиоматичность проекту (учитывая технологии, подходы, библиотеки и их версии).

---

## 1) Список абстрактных вариантов

Сгенерируй "список абстрактных вариантов": как минимум `{max_abstract_variants}` идей, отражающих общие принципы
возможных решений.

- Описывай каждый вариант кратко (1–2 предложения).
- На этом этапе **не** углубляйся.
- Варианты, явно нарушающие `заданные_ограничения`, не включай.

---

## 2) Список перспективных вариантов

Из "списка абстрактных вариантов" выбери `{num_promising}` наиболее перспективных по `критерий_поиска`.  
Этот поднабор называется "список перспективных вариантов".

---

## 3) Деревовидный поиск решений

Выполни деревовидный поиск на основе "списка перспективных вариантов".

### Ограничения дерева

- Максимальная глубина: `{max_depth}` уровней.
- Максимальное число ветвлений на уровне: не более `{max_branching}`.
    - Перед ветвлением оцени ключевые направления развития текущего варианта и создай на их основе несколько ветвей
      (но не больше `{max_branching}`).
    - Каждое ветвление должно быть осмысленным и опираться на `критерий_поиска`  
      (например, разные компромиссы между простотой, расширяемостью, переиспользованием существующих абстракций).
- Аккумулятор успешных решений: максимум `{max_succeed}` листьев.

Успешным решением считается лист, который:
- не нарушает `заданные_ограничения`;
- хорошо удовлетворяет `критерий_поиска`.

### Тупиковые ветки

Если развитие варианта приводит к нарушению `заданные_ограничения`, овер-инжинирингу, некорректности или явному ухудшению
по `критерий_поиска`, такая ветка становится **тупиковой**:
- порождает **0 потомков**;
- финальный лист не включается в аккумулятор успешных решений.

---

## 4) Выбор наилучшего решения

1. Из аккумулятора успешных решений выбери одно наилучшее по `критерий_поиска`
   (строго соблюдая `заданные_ограничения`).
2. Сформулируй **детализированное архитектурное описание** найденного решения, достаточное для его дальнейшей реализации:
    - ключевые шаги;
    - основные компоненты/абстракции;
    - структура данных;
    - разделение ответственности;
    - основные точки расширения или параметры выбора.

(В рамках этой команды **код не требуется**.)

---

## Интерпретация входа (параметры)

После имени команды могут идти аргументы в свободной форме — числа, текст, пожелания.  
По контексту привяжи числа к параметрам. Если какое-либо число отсутствует — используй значение по умолчанию.

- `{max_abstract_variants}` — минимум абстрактных вариантов (по умолчанию **20**).
- `{num_promising}` — размер списка перспективных вариантов (по умолчанию **5**).
- `{max_depth}` — максимальная глубина дерева (по умолчанию **5**).
- `{max_branching}` — максимальное ветвление (по умолчанию **3**).
- `{max_succeed}` — максимальный размер аккумулятора успешных решений (по умолчанию **40**).

`критерий_поиска`:
- если указан явно — используй его;
- если нет — применяй дефолтные критерии.
